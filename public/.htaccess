# AT_Manut — Apache config para cPanel (public_html/manut/)
# Copiado automaticamente para dist/ pelo Vite (pasta public/).

# ── Cache-Control ────────────────────────────────────────────────────────────
# index.html nunca em cache: garante que após cada deployment o browser
# carrega o HTML novo (que referencia os assets JS/CSS com novo hash).
<IfModule mod_headers.c>
  <FilesMatch "^index\.html$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "0"
  </FilesMatch>

  # Assets com hash no nome (Vite): cache de 1 ano — imutáveis.
  # O nome muda a cada build, pelo que ficheiros antigos nunca conflituam.
  <FilesMatch "\.(js|css|woff2?|ttf|otf|png|svg|ico|webp|jpg|jpeg)$">
    Header set Cache-Control "public, max-age=31536000, immutable"
  </FilesMatch>
</IfModule>

# ── SPA Routing ──────────────────────────────────────────────────────────────
# Redireciona rotas React Router para index.html (evita 404 no refresh).
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /manut/

  # Não redirecionar ficheiros e pastas existentes
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d

  # Redirecionar tudo o resto para index.html
  RewriteRule ^ index.html [L]
</IfModule>
