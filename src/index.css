@import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&display=swap');

:root {
  font-family: 'DM Sans', system-ui, sans-serif;
  line-height: 1.5;
  font-weight: 400;
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-tap-highlight-color: transparent;

  /* Navel brand colors - industrial/technical feel */
  --color-bg: #0f1419;
  --color-bg-card: #1a2332;
  --color-bg-elevated: #243044;
  --color-accent: #00a3e0;
  --color-accent-hover: #33b5e7;
  --color-accent-muted: rgba(0, 163, 224, 0.15);
  --color-success: #22c55e;
  --color-warning: #f59e0b;
  --color-danger: #ef4444;
  --color-text: #e8edf2;
  --color-text-muted: #8b9cad;
  --color-border: #2d3a4d;
  --radius: 10px;
  --radius-sm: 8px;
  --shadow: 0 4px 20px rgba(0, 0, 0, 0.25);
  --touch-min: 44px;
  --spacing-page: 1.25rem;
}

* {
  box-sizing: border-box;
}

html {
  overflow-x: hidden;
}
body {
  margin: 0;
  min-height: 100dvh;
  min-height: 100vh;
  background: var(--color-bg);
  color: var(--color-text);
  padding-bottom: env(safe-area-inset-bottom, 0);
  overflow-x: hidden;
  /* Desactiva pull-to-refresh nativo do browser mobile (gesto "puxar para baixo")
     que causaria 404 na SPA ao recarregar uma rota do React Router */
  overscroll-behavior-y: none;
}

a {
  font-weight: 500;
  color: var(--color-accent);
  text-decoration: none;
}
a:hover {
  color: var(--color-accent-hover);
}

button {
  border-radius: var(--radius);
  border: none;
  padding: 0.6em 1.2em;
  min-height: var(--touch-min);
  font-size: 0.95em;
  font-weight: 500;
  font-family: inherit;
  background: var(--color-accent);
  color: white;
  cursor: pointer;
  transition: background 0.2s ease, transform 0.15s ease;
}
button:hover {
  background: var(--color-accent-hover);
}
button:active {
  transform: scale(0.98);
}
button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}
button.secondary,
.btn.secondary {
  background: rgba(0, 163, 224, 0.18);
  color: #93d4f0;
  border: 1px solid rgba(0, 163, 224, 0.5);
}
button.secondary:hover,
.btn.secondary:hover {
  background: rgba(0, 163, 224, 0.28);
  border-color: var(--color-accent);
  color: #b8e4f5;
}

input, select, textarea {
  font-family: inherit;
  font-size: 16px; /* Evita zoom automático no iOS em inputs */
  padding: 0.6em 0.9em;
  border-radius: var(--radius);
  border: 1px solid var(--color-border);
  background: var(--color-bg-card);
  color: var(--color-text);
}
input:focus, select:focus, textarea:focus {
  outline: none;
  border-color: var(--color-accent);
  box-shadow: 0 0 0 3px var(--color-accent-muted);
}

form label { display: block; margin-bottom: 1rem; }
form label > span:not(.required) { display: block; margin-bottom: 0.35rem; font-size: 0.9em; color: var(--color-text-muted); }
form input, form select, form textarea { width: 100%; }
.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
.form-actions { display: flex; gap: 0.75rem; justify-content: flex-end; margin-top: 1.5rem; }
.form-erro { color: var(--color-danger); font-size: 0.9em; margin: -0.5rem 0 1rem; }
form input.readonly { background: var(--color-bg-elevated); color: var(--color-text-muted); cursor: not-allowed; }

/* Loading state para lazy routes */
.page-loader {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  min-height: 200px;
  color: var(--color-text-muted);
}
.page-loader-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--color-border);
  border-top-color: var(--color-accent);
  border-radius: 50%;
  animation: page-loader-spin 0.8s linear infinite;
}
@keyframes page-loader-spin {
  to { transform: rotate(360deg); }
}
.page-loader-text { font-size: 0.9em; }

/* Touch targets: min 44px (Apple HIG, WCAG) */
button, .btn-back, .icon-btn { min-height: var(--touch-min); }
button:not(.icon-btn) { min-height: var(--touch-min); }

/* Focus visible para acessibilidade (teclado) */
button:focus-visible, a:focus-visible, input:focus-visible, select:focus-visible, textarea:focus-visible {
  outline: 2px solid var(--color-accent);
  outline-offset: 2px;
}
button:focus:not(:focus-visible), input:focus:not(:focus-visible) { outline: none; }

.page { max-width: 1200px; margin: 0 auto; padding: 0; }
.page h1 { margin: 0 0 0.25rem; font-size: 1.5rem; }
.page-sub { margin: 0 0 1rem; color: var(--color-text-muted); font-size: 0.9em; }
.page-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 1rem;
  flex-wrap: wrap;
  margin-bottom: 1.25rem;
}
.page-header button { white-space: nowrap; flex-shrink: 0; }
.btn-back {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0;
  background: none;
  border: none;
  color: var(--color-accent);
  font-size: 0.95em;
  cursor: pointer;
}
.btn-back:hover { color: var(--color-accent-hover); }

.search-bar {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
}
.search-bar .search-icon { color: var(--color-text-muted); flex-shrink: 0; }
.search-bar input {
  flex: 1;
  max-width: 320px;
  padding-left: 2.5rem;
  margin-bottom: 0;
}
.search-bar .search-clear {
  background: none;
  border: none;
  color: var(--color-text-muted);
  font-size: 1.25rem;
  cursor: pointer;
  padding: 0.35rem 0.5rem;
  line-height: 1;
  min-height: auto;
  flex-shrink: 0;
}
.search-bar .search-clear:hover { color: var(--color-text); }

.card { background: var(--color-bg-card); border-radius: var(--radius); padding: 1.25rem; border: 1px solid var(--color-border); }
.table-card.card { padding: 0; overflow-x: auto; }

.data-table { width: 100%; border-collapse: collapse; font-size: 0.95em; }
.data-table th, .data-table td { text-align: left; padding: 0.75rem 0.75rem; border-bottom: 1px solid var(--color-border); }
.data-table th { font-weight: 600; color: var(--color-text-muted); font-size: 0.8em; text-transform: uppercase; letter-spacing: 0.04em; white-space: nowrap; }
.data-table tbody tr:hover { background: var(--color-bg-elevated); }

.actions { display: flex; gap: 0.5rem; flex-wrap: nowrap; flex-shrink: 0; }
.icon-btn {
  padding: 0.5rem !important;
  min-width: var(--touch-min) !important;
  min-height: var(--touch-min) !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  background: transparent !important;
  color: var(--color-text-muted) !important;
  transition: color 0.15s ease, background 0.15s ease;
}
.icon-btn:hover { color: var(--color-accent) !important; background: rgba(0, 163, 224, 0.22) !important; }
.icon-btn.danger:hover { color: var(--color-danger) !important; background: rgba(239,68,68,0.15) !important; }

/* Modais/Painéis — ecrã completo, fontes ajustadas (experiência consistente) */
.modal-overlay {
  position: fixed;
  inset: 0;
  min-height: 100dvh;
  min-height: 100vh;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: stretch;
  justify-content: center;
  z-index: 1000;
  padding: env(safe-area-inset-top, 0) env(safe-area-inset-right, 0) env(safe-area-inset-bottom, 0) env(safe-area-inset-left, 0);
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}
.modal {
  background: var(--color-bg-card);
  border-radius: 0;
  padding: 0.85rem 1rem;
  max-width: 100%;
  width: 100%;
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  box-shadow: none;
  border: none;
  margin: 0;
  display: flex;
  flex-direction: column;
  font-size: 0.9rem;
}
/* Títulos de modais/painéis — sempre numa linha, fonte responsiva */
.modal h2,
.modal h3.modal-title,
.modal-relatorio-header h2,
.modal-fotos-header h2,
.modal-email-envio h2,
.modal-ficha-cliente h2,
.modal-conflitos-header h2,
.agendamento-sugestao-modal h3 {
  margin: 0 0 0.85rem;
  font-size: clamp(0.6rem, 2.2vw, 0.88rem);
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.modal-relatorio-header h2,
.modal-fotos-header h2,
.modal-conflitos-header h2 { margin-bottom: 0; }
.modal-relatorio-header h2,
.modal-fotos-header h2,
.modal-conflitos-header h2 {
  flex: 1;
  min-width: 0;
}
.modal-hint { font-size: 0.85rem; color: var(--color-text-muted); }
.text-muted { color: var(--color-text-muted); }
.form-sucesso { color: var(--color-success); font-size: 0.95em; margin-bottom: 1rem; }

/* Documentação técnica (Equipamentos + Manutenções) */
.modal-documentacao .modal-hint { font-size: 0.85em; color: var(--color-text-muted); margin: -0.25rem 0 0.85rem; }
.doc-lista { max-height: min(280px, 35dvh); overflow-y: auto; margin-bottom: 1rem; border: 1px solid var(--color-border); border-radius: 8px; padding: 0.5rem; }
.doc-item { display: flex; align-items: center; justify-content: space-between; gap: 0.75rem; padding: 0.6rem; border-radius: 6px; background: var(--color-bg-elevated); margin-bottom: 0.4rem; }
.doc-item:last-child { margin-bottom: 0; }
.doc-item-link { text-decoration: none; color: inherit; cursor: pointer; transition: background 0.2s; }
.doc-item-link:hover { background: var(--color-border); color: var(--color-accent); }
.doc-item-info { flex: 1; min-width: 0; }
.doc-tipo { display: block; font-size: 0.75em; color: var(--color-text-muted); }
.doc-titulo { font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.doc-item-actions { display: flex; gap: 0.25rem; flex-shrink: 0; }
.doc-item-icon { flex-shrink: 0; color: var(--color-text-muted); }
.doc-item-link:hover .doc-item-icon { color: var(--color-accent); }
.doc-empty { margin: 1rem; color: var(--color-text-muted); font-size: 0.9em; text-align: center; }
.form-add-doc { padding-top: 1rem; border-top: 1px solid var(--color-border); }
.form-add-doc .form-row { display: flex; gap: 1rem; flex-wrap: wrap; }
.form-add-doc .form-row label { flex: 1; min-width: 140px; }
.btn-add-doc { display: inline-flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem; }
.checklist-quick-actions { margin-bottom: 0.75rem; font-size: 0.9em; }
.checklist-quick-actions .btn-link-checklist {
  background: none; border: none; padding: 0; font: inherit;
  color: var(--color-accent); cursor: pointer; text-decoration: underline;
}
.checklist-quick-actions .btn-link-checklist:hover { color: var(--color-accent-hover); }
.checklist-quick-sep { margin: 0 0.35rem; color: var(--color-text-muted); }

/* ── Fotos no modal de execução ── */
.fotos-section { margin-top: 0.5rem; }
.fotos-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.6rem; gap: 0.75rem; }
.fotos-label { font-size: 0.9rem; font-weight: 500; }
.fotos-count { font-size: 0.8rem; color: var(--color-text-muted); font-weight: 400; }
.fotos-input-hidden { display: none; }
.btn-foto {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 14px;
  font-size: 0.82rem;
  font-weight: 600;
  background: var(--color-primary);
  color: #fff;
  border-radius: var(--radius);
  cursor: pointer;
  border: none;
  transition: background 0.18s;
  white-space: nowrap;
}
.btn-foto:hover { background: var(--color-primary-dark); }
.fotos-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
  gap: 8px;
  margin-top: 0.4rem;
}
.foto-thumb {
  position: relative;
  aspect-ratio: 1;
  border-radius: var(--radius);
  overflow: hidden;
  border: 1px solid var(--color-border);
  background: var(--color-bg-elevated);
}
.foto-thumb img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
.foto-remover {
  position: absolute;
  top: 3px;
  right: 3px;
  background: rgba(0,0,0,0.65);
  color: #fff;
  border: none;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  min-width: 24px;
  min-height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  padding: 0;
  transition: background 0.15s;
  -webkit-tap-highlight-color: transparent;
}
.foto-remover:hover { background: var(--color-danger); }
.fotos-vazio { font-size: 0.82rem; color: var(--color-text-muted); margin: 0; }

/* Assinatura digital no modal de execução */
.assinatura-section { margin-top: 1.25rem; padding-top: 1rem; border-top: 2px solid var(--color-primary); }
.assinatura-titulo { display: flex; align-items: center; gap: 0.4rem; margin: 0 0 1rem; font-size: 0.95rem; color: var(--color-primary-light); }
.label-required { display: flex; flex-direction: column; gap: 0.35rem; font-size: 0.9rem; font-weight: 500; margin-bottom: 0.85rem; }
.req-star { color: var(--color-danger); font-weight: 700; margin-left: 2px; }
.assinatura-canvas-label { font-size: 0.9rem; font-weight: 500; margin-bottom: 0.4rem; }
.assinatura-canvas-wrap { margin-top: 0.25rem; }
.assinatura-canvas {
  display: block;
  width: 100%;
  max-width: 480px;
  height: 140px;
  background: #fff;
  border: 2px dashed var(--color-border);
  border-radius: var(--radius);
  cursor: crosshair;
  touch-action: none;
}
.assinatura-canvas--feita { border-style: solid; border-color: var(--color-success, #22c55e); }
.assinatura-canvas-actions { display: flex; align-items: center; gap: 1rem; margin-top: 0.4rem; }
.assinatura-limpar { display: flex; align-items: center; gap: 4px; font-size: 0.8rem; }
.assinatura-ok { font-size: 0.82rem; color: var(--color-success, #22c55e); font-weight: 600; }

.form-section.consumiveis-section, .form-section.horas-acumuladas-section { margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--color-border); }
.form-section.consumiveis-section h3, .form-section.horas-acumuladas-section h3 { margin: 0 0 0.75rem; font-size: 0.95rem; color: var(--color-text-muted); }
.horas-info { margin: 0; font-size: 0.9em; }
.consumiveis-card { margin-bottom: 1rem; padding: 0.75rem; background: var(--color-bg-elevated); border-radius: 8px; }
.consumiveis-card h4 { margin: 0 0 0.5rem; font-size: 0.9rem; color: var(--color-text-muted); }
.consumiveis-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.35rem 1rem; font-size: 0.9em; }
.doc-links-inline { display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem; padding: 0.5rem; background: var(--color-bg-elevated); border-radius: 8px; font-size: 0.9em; }

.btn-link-inline { background: none; border: none; padding: 0; color: inherit; cursor: pointer; font: inherit; }
.btn-link-inline:hover { color: var(--color-accent); }
.ficha-cliente-dados { margin-bottom: 1rem; font-size: 0.88em; }
.ficha-cliente-dados p { margin: 0.25rem 0; }
.ficha-maquinas h3 { margin: 0 0 0.6rem; font-size: 0.9rem; font-weight: 500; color: var(--color-text-muted); }
.maquinas-lista { max-height: min(280px, 35dvh); overflow-y: auto; margin-bottom: 1rem; border: 1px solid var(--color-border); border-radius: 8px; padding: 0.5rem; }
.maquina-ficha-item { display: flex; align-items: center; justify-content: space-between; gap: 0.75rem; padding: 0.6rem; border-radius: 6px; background: var(--color-bg-elevated); margin-bottom: 0.4rem; font-size: 0.9em; }
.maquina-ficha-item:last-child { margin-bottom: 0; }
.maquina-ficha-info { flex: 1; min-width: 0; }
.maquina-ficha-actions { display: flex; gap: 0.25rem; flex-shrink: 0; }
.btn-add-maquina { display: inline-flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem; }

.categoria-card { display: block; padding: 1.25rem; background: var(--color-bg-elevated); border: 1px solid var(--color-border); border-radius: var(--radius); text-align: left; cursor: pointer; transition: all 0.2s; }
.categoria-card:hover { border-color: var(--color-accent); background: var(--color-accent-muted); }
.categoria-card h3 { margin: 0 0 0.25rem; font-size: 1.1rem; }
.categoria-card p { margin: 0; font-size: 0.9em; color: var(--color-text-muted); }
.categorias-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 1rem; }
.equipamentos-nav { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1.5rem; font-size: 0.9em; }
.equipamentos-nav .breadcrumb { color: var(--color-text-muted); }
.equipamentos-nav .breadcrumb-btn {
  background: none; border: none; color: var(--color-accent); cursor: pointer;
  padding: 0.5rem 0; font: inherit; display: inline-flex; align-items: center; gap: 0.35rem;
  min-height: var(--touch-min); text-decoration: underline;
}
.equipamentos-nav .breadcrumb-btn:hover { opacity: 0.9; }
.maquinas-por-cliente { margin-top: 1rem; }
.maquinas-por-cliente h4 { margin: 0 0 0.5rem; font-size: 0.95rem; color: var(--color-text-muted); padding-bottom: 0.25rem; border-bottom: 1px solid var(--color-border); }
.maquinas-por-cliente .maquina-row { display: flex; align-items: center; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid var(--color-border); font-size: 0.9em; }
.maquinas-por-cliente .maquina-row .actions { flex-wrap: nowrap; flex-shrink: 0; }
.maquinas-por-cliente .maquina-row:last-child { border-bottom: none; }
.doc-links-inline > .doc-link-inline { padding: 0.2rem 0.5rem; background: var(--color-bg-card); border-radius: 6px; color: var(--color-accent); }
.doc-links-inline > .doc-link-inline:hover { background: var(--color-accent-muted); }
.badge-sim { background: rgba(34, 197, 94, 0.2); color: var(--color-success); padding: 0.15rem 0.4rem; border-radius: 4px; font-size: 0.85em; }
.badge-nao { background: rgba(239, 68, 68, 0.2); color: var(--color-danger); padding: 0.15rem 0.4rem; border-radius: 4px; font-size: 0.85em; }
.btn-simnao { padding: 0.25rem 0.6rem; font-size: 0.85em; border-radius: 6px; border: 1px solid var(--color-border); background: var(--color-bg); cursor: pointer; color: var(--color-text); }
.btn-simnao.active-sim { background: var(--color-success); color: #fff; border-color: var(--color-success); }
.btn-simnao.active-nao { background: var(--color-danger); color: #fff; border-color: var(--color-danger); }
.btn-simnao:not(.active-sim):not(.active-nao):hover { background: var(--color-bg-elevated); }
.doc-table-wrapper { margin-bottom: 1.5rem; overflow-x: auto; -webkit-overflow-scrolling: touch; }
.doc-table .doc-table-actions { display: flex; gap: 0.35rem; align-items: center; }

/* Ficha cliente */
.modal-ficha-cliente { flex: 1; min-height: 0; overflow-y: auto; }
.ficha-empty { padding: 1.5rem 0; }
.ficha-empty p { margin-bottom: 1rem; }
.maquinas-ficha-lista, .manutencoes-histórico { display: flex; flex-direction: column; gap: 0.5rem; }
.maquina-ficha-card {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  padding: 0.75rem 0.9rem;
  min-height: var(--touch-min);
  background: var(--color-bg-elevated);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  text-align: left;
  cursor: pointer;
  transition: border-color 0.2s, background 0.2s;
  font-size: 0.88rem;
}
.maquina-ficha-card:hover { border-color: var(--color-accent); background: var(--color-accent-muted); }
.maquina-detalhe-header { margin-bottom: 1rem; }
.maquina-detalhe-header h3 { font-size: 0.9rem; font-weight: 500; margin: 0 0 0.6rem; }
.maquina-detalhe-actions { display: flex; gap: 0.5rem; flex-wrap: wrap; }
.manutencao-item { display: flex; flex-direction: column; gap: 0.4rem; padding: 0.65rem 0.85rem; background: var(--color-bg-elevated); border-radius: var(--radius-sm); border: 1px solid var(--color-border); font-size: 0.88rem; }
.manutencao-item-btn {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  padding: 0.5rem 0;
  background: none;
  border: none;
  color: inherit;
  font: inherit;
  text-align: left;
  cursor: pointer;
  min-height: var(--touch-min);
}
.manutencao-item-btn:hover { color: var(--color-accent); }
.btn-enviar-email { font-size: 0.9em; padding: 0.5rem 0.75rem !important; }
.btn-executar-manut {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.25rem 0.45rem;
  font-size: 0.75em;
  font-weight: 600;
  background: #39ff14;
  color: #0a1f08;
  border: none;
  border-radius: var(--radius-sm);
  cursor: pointer;
  white-space: nowrap;
  box-shadow: 0 0 8px rgba(57, 255, 20, 0.4);
}
.btn-executar-manut:hover {
  background: #52ff33;
  box-shadow: 0 0 12px rgba(57, 255, 20, 0.5);
}

/* Responsive */
@media (max-width: 768px) {
  .page { padding: 0 0.5rem; }
  .page h1 { font-size: 1.35rem; }
  .page-header { flex-direction: column; align-items: stretch; gap: 0.75rem; }
  .page-header > div { order: 1; }
  .page-header button { order: 2; width: 100%; min-height: var(--touch-min); }
  .search-bar { margin-bottom: 0.75rem; }
  .search-bar input { max-width: none; }
  .table-card {
    border-radius: var(--radius);
    margin-left: -0.5rem;
    margin-right: -0.5rem;
    padding: 0;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  .table-card .data-table { min-width: 640px; }
  .data-table th, .data-table td { padding: 0.75rem 0.6rem; font-size: 0.9em; }
  .data-table th { font-size: 0.75em; }
  .assinatura-canvas { max-width: 100%; }
  .doc-lista { max-height: min(220px, 30dvh); }
  .form-add-doc .form-row { flex-direction: column; }
  .email-config-aviso,
  .email-config-aviso code { font-size: 0.85rem; }
  .btn-foto { font-size: 0.9rem; }
  .assinatura-limpar,
  .assinatura-ok { font-size: 0.9rem; }
  .categorias-grid { grid-template-columns: 1fr; gap: 0.75rem; }
  .categoria-card { padding: 1rem; min-height: var(--touch-min); }
  .categoria-card h3, .categoria-card h4 { font-size: 1rem; }
  .form-row { grid-template-columns: 1fr; }
  .consumiveis-grid { grid-template-columns: 1fr; }
  .actions { gap: 0.35rem; }
  .maquinas-por-cliente .maquina-row {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
    padding: 0.75rem 0;
  }
  .maquinas-por-cliente .maquina-row .actions { margin-top: 0.25rem; }
  .maquinas-por-cliente-lista { max-height: 70vh; overflow-y: auto; -webkit-overflow-scrolling: touch; }
}

@media (max-width: 480px) {
  .data-table thead { display: none; }
  .table-card .data-table { min-width: 0; }
  .data-table tr { display: block; border-bottom: 1px solid var(--color-border); padding: 0.75rem 0; }
  .data-table td {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0;
    border-bottom: none;
  }
  .data-table td::before {
    content: attr(data-label);
    font-weight: 600;
    font-size: 0.8em;
    color: var(--color-text-muted);
    flex-shrink: 0;
  }
  .data-table td.actions { justify-content: flex-end; flex-wrap: nowrap; }
  .data-table td.actions::before { display: none; }
  .data-table td[data-label="Equipamento"] { flex-direction: column; align-items: flex-start; }
  .data-table td[data-label="Equipamento"] .text-muted { font-size: 0.85em; }
}

/* ── Secção de email no modal de execução ── */
.email-section { border-top: 1px solid var(--color-border); padding-top: 1rem; }
.email-config-aviso {
  display: block;
  margin-top: 0.35rem;
  font-size: 0.78rem;
  color: var(--color-warning, #f59e0b);
  line-height: 1.4;
}
.email-config-aviso code {
  font-family: 'Courier New', monospace;
  font-size: 0.78rem;
  background: rgba(245,158,11,.12);
  padding: 1px 4px;
  border-radius: 3px;
}
.btn-preview {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin-top: 0.6rem;
  padding: 0.45rem 1rem;
  font-size: 0.85rem;
  font-weight: 500;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  color: var(--color-text);
  cursor: pointer;
  transition: background 0.15s, border-color 0.15s;
}
.btn-preview:hover { background: var(--color-bg-elevated); border-color: var(--color-primary); color: var(--color-primary); }

/* Toast de resultado de email */
.email-toast {
  margin: 0 0 0.75rem;
  padding: 0.65rem 1rem;
  border-radius: var(--radius);
  font-size: 0.88rem;
  font-weight: 500;
  line-height: 1.4;
  animation: toast-in 0.25s ease;
}
.email-toast--ok   { background: #f0fdf4; border: 1px solid #86efac; color: #15803d; }
.email-toast--erro { background: #fef2f2; border: 1px solid #fca5a5; color: #b91c1c; }
@keyframes toast-in {
  from { opacity: 0; transform: translateY(-6px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ── Ecrã de revisão de conflitos de agendamento ── */
.modal-conflitos-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.65rem;
}

.conflitos-lista {
  list-style: none;
  padding: 0;
  margin: 0 0 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}
.conflito-item {
  display: flex;
  align-items: flex-start;
  gap: 0.4rem;
  background: var(--color-bg-elevated, #f8f8fc);
  border: 1px solid var(--color-border);
  border-left: 3px solid var(--color-warning, #f59e0b);
  border-radius: 6px;
  padding: 0.5rem 0.65rem;
  font-size: 0.85rem;
  line-height: 1.4;
}
.conflito-item svg { margin-top: 2px; color: var(--color-warning, #f59e0b); }

.conflitos-acoes {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}
.conflitos-acoes .btn {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0.12rem;
  padding: 0.55rem 0.85rem;
  font-size: 0.88rem;
  text-align: left;
  line-height: 1.3;
}
.conflitos-acoes .btn small {
  font-size: 0.78rem;
  font-weight: 400;
  opacity: 0.8;
}
.btn-outline-muted {
  background: transparent;
  border: 1px solid var(--color-border);
  color: var(--color-text-muted);
  border-radius: var(--radius);
  cursor: pointer;
  font-size: 0.9rem;
  font-weight: 500;
  transition: background 0.15s, color 0.15s;
}
.btn-outline-muted:hover { background: var(--color-border); color: var(--color-text); }

/* ── Orientação: ajustes para rotação em tablets ──────────────────────────────── */
@media (max-width: 1024px) and (orientation: landscape) {
  .modal { padding: 0.6rem 0.85rem; }
  .doc-lista { max-height: min(200px, 45dvh); }
  .maquinas-lista { max-height: min(200px, 45dvh); }
}
